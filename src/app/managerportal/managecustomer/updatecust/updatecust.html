<div class="container mt-5">
  <h2 class="text-center mb-4">Update User</h2>

  <!-- User ID Search -->
  <div class="card shadow-sm p-3 mb-4">
    <div class="d-flex flex-column flex-md-row align-items-md-center">
      <label for="userId" class="form-label me-2 mb-2 mb-md-0 fw-bold">Enter User ID:</label>
      <div class="input-group w-100 w-md-50">
        <span class="input-group-text"><i class="bi bi-person-badge"></i></span>
        <input
          type="number"
          id="userId"
          class="form-control"
          [(ngModel)]="userId"
          placeholder="Enter User ID"
        />
        <button class="btn btn-primary" (click)="getUser()">
          <i class="bi bi-search"></i> Get User
        </button>
      </div>
    </div>
  </div>

  <div *ngIf="user">
    <form #userForm="ngForm" (ngSubmit)="submit(userForm)" novalidate>
      <div class="card shadow-lg p-4">
        <div class="row g-3">

          <!-- User ID -->
          <div class="col-md-6">
            <label class="form-label">User ID</label>
            <input type="text" class="form-control" name="userId" [(ngModel)]="user.userId" readonly />
          </div>

          <!-- User Name -->
          <div class="col-md-6">
            <label class="form-label">User Name</label>
            <div class="input-group">
              <span class="input-group-text"><i class="bi bi-person"></i></span>
              <input
                type="text"
                class="form-control"
                name="userName"
                placeholder="User Name"
                required
                [(ngModel)]="user.userName"
                pattern="^[A-Za-z ]+$"
                minlength="2"
                #userName="ngModel"
              />
            </div>
            <div *ngIf="userName.invalid && userName.touched" class="text-danger small mt-1">
              <small *ngIf="userName.errors?.['required']">User name is required.</small>
              <small *ngIf="userName.errors?.['minlength']">Minimum 2 characters required.</small>
              <small *ngIf="userName.errors?.['pattern']">Only alphabets and spaces allowed.</small>
            </div>
          </div>

          <!-- DOB -->
          <div class="col-md-6">
            <label class="form-label">Date of Birth</label>
            <div class="input-group">
              <span class="input-group-text"><i class="bi bi-calendar3"></i></span>
              <input
                type="date"
                class="form-control"
                name="doB"
                required
                [ngModel]="user.doB"
                readonly
              />
            </div>
          </div>

          <!-- Address -->
          <div class="col-md-6">
            <label class="form-label">Address</label>
            <div class="input-group">
              <span class="input-group-text"><i class="bi bi-house-door"></i></span>
              <input
                type="text"
                class="form-control"
                name="uAddress"
                placeholder="Address"
                [(ngModel)]="user.uAddress"
              />
            </div>
          </div>

          <!-- Mobile -->
          <div class="col-md-6">
            <label class="form-label">Mobile Number</label>
            <div class="input-group">
              <span class="input-group-text"><i class="bi bi-telephone"></i></span>
              <input
                type="tel"
                class="form-control"
                name="Mobile"
                placeholder="Mobile Number"
                required
                [(ngModel)]="user.mobile"
                pattern="^[0-9]{10}$"
                #mobile="ngModel"
              />
            </div>
            <div *ngIf="mobile.invalid && mobile.touched" class="text-danger small mt-1">
              <small *ngIf="mobile.errors?.['required']">Mobile number is required.</small>
              <small *ngIf="mobile.errors?.['pattern']">Must be exactly 10 digits.</small>
            </div>
          </div>

          <!-- Email -->
          <div class="col-md-6">
            <label class="form-label">Email</label>
            <div class="input-group">
              <span class="input-group-text"><i class="bi bi-envelope"></i></span>
              <input
                type="email"
                class="form-control"
                name="Email"
                placeholder="Email"
                required
                [(ngModel)]="user.email"
                pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$"
                #email="ngModel"
              />
            </div>
            <div *ngIf="email.invalid && email.touched" class="text-danger small mt-1">
              <small *ngIf="email.errors?.['required']">Email is required.</small>
              <small *ngIf="email.errors?.['pattern']">Invalid email format.</small>
            </div>
          </div>

          <!-- PAN -->
          <div class="col-md-6">
            <label class="form-label">PAN Card</label>
            <div class="input-group">
              <span class="input-group-text"><i class="bi bi-credit-card"></i></span>
              <input
                type="text"
                class="form-control"
                name="panCard"
                required
                [ngModel]="user.panCard"
                readonly
              />
            </div>
          </div>

          <!-- Aadhar -->
          <div class="col-md-6">
            <label class="form-label">Aadhar Card</label>
            <div class="input-group">
              <span class="input-group-text"><i class="bi bi-person-vcard"></i></span>
              <input
                type="text"
                class="form-control"
                name="aadharCard"
                required
                [ngModel]="user.aadharCard"
                readonly
              />
            </div>
          </div>

          <!-- Submit -->
          <div class="col-12 text-center mt-4">
            <button
              type="submit"
              class="btn btn-success px-4"
              [disabled]="userForm.invalid"
            >
              <i class="bi bi-check-circle"></i> Update
            </button>
          </div>
        </div>
      </div>
    </form>
  </div>
</div>
